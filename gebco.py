import png
import colorsys

def box(seq):
    size = 3
    return [seq[i:i+size] for i in range(0, len(seq), size)]

cm = png.Reader('gebco_bathymetry.png').asRGB()[2]
for i in range(0,16):
    next(cm)

line = [int(x) for x in next(cm)]

#line = [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 8, 48, 107, 8, 50, 110, 8, 51, 112, 8, 52, 113, 8, 53, 115, 8, 55, 118, 8, 57, 120, 8, 58, 121, 8, 60, 124, 8, 61, 126, 8, 62, 128, 8, 64, 131, 8, 65, 132, 8, 66, 134, 8, 68, 137, 8, 69, 139, 8, 70, 140, 8, 72, 143, 8, 74, 145, 8, 75, 147, 8, 77, 150, 8, 78, 151, 8, 79, 153, 8, 81, 156, 9, 82, 157, 10, 83, 158, 11, 85, 159, 12, 86, 160, 13, 87, 161, 14, 89, 162, 15, 90, 163, 16, 91, 164, 17, 93, 165, 18, 94, 166, 19, 95, 167, 21, 97, 169, 21, 98, 169, 22, 99, 170, 24, 101, 172, 24, 102, 172, 25, 103, 173, 27, 105, 175, 28, 106, 176, 28, 107, 176, 30, 109, 178, 31, 110, 179, 31, 111, 179, 33, 113, 181, 34, 114, 182, 35, 115, 182, 37, 117, 183, 38, 118, 184, 39, 119, 184, 41, 121, 185, 42, 122, 186, 43, 123, 186, 45, 125, 187, 46, 126, 188, 47, 127, 188, 50, 130, 190, 51, 131, 190, 52, 132, 191, 54, 134, 192, 55, 135, 192, 56, 136, 193, 58, 138, 194, 59, 139, 194, 60, 140, 195, 61, 141, 195, 63, 143, 196, 64, 144, 197, 65, 145, 197, 67, 147, 199, 69, 148, 199, 70, 149, 200, 72, 150, 201, 74, 151, 201, 75, 152, 202, 78, 154, 203, 79, 155, 203, 80, 156, 204, 83, 157, 205, 84, 158, 205, 85, 159, 206, 88, 161, 207, 89, 162, 207, 90, 163, 208, 93, 164, 209, 94, 165, 209, 95, 166, 210, 98, 168, 211, 99, 169, 211, 101, 170, 212, 103, 171, 213, 104, 172, 213, 106, 173, 214, 109, 175, 214, 110, 176, 215, 112, 177, 215, 115, 178, 216, 117, 179, 216, 118, 180, 216, 121, 182, 217, 123, 183, 217, 125, 184, 218, 128, 185, 218, 129, 186, 219, 131, 187, 219, 134, 189, 220, 136, 190, 220, 137, 191, 221, 140, 192, 221, 142, 193, 222, 144, 194, 222, 147, 196, 223, 148, 197, 223, 150, 198, 223, 153, 199, 224, 155, 200, 224, 156, 201, 225, 159, 203, 225, 161, 203, 226, 162, 204, 226, 164, 205, 227, 166, 205, 228, 167, 206, 228, 169, 207, 229, 171, 207, 229, 172, 208, 230, 174, 209, 231, 176, 209, 231, 177, 210, 232, 178, 211, 232, 181, 212, 233, 182, 212, 233, 183, 213, 234, 186, 214, 235, 187, 214, 235, 188, 215, 236, 191, 216, 236, 192, 216, 237, 193, 217, 237, 196, 218, 238, 197, 218, 239, 198, 219, 239, 200, 220, 240, 200, 221, 240, 201, 221, 240, 203, 222, 241, 203, 223, 241, 204, 223, 241, 206, 224, 242, 206, 225, 242, 207, 225, 242, 209, 226, 243, 209, 227, 243, 210, 227, 243, 212, 228, 244, 212, 229, 244, 213, 229, 244, 215, 230, 245, 215, 231, 245, 216, 231, 245, 218, 232, 246, 218, 233, 246, 219, 233, 246, 221, 234, 247, 221, 235, 247, 222, 235, 247, 224, 236, 248, 224, 237, 248, 225, 237, 248, 227, 238, 249, 227, 239, 249, 228, 239, 249, 230, 240, 250, 231, 241, 250, 231, 241, 250, 233, 242, 251, 234, 243, 251, 235, 243, 251, 236, 244, 252, 237, 245, 252, 238, 245, 252, 239, 246, 253, 240, 247, 253, 241, 247, 253, 242, 248, 254, 243, 249, 254, 244, 249, 254, 245, 250, 255, 246, 251, 255, 0, 0, 0]

boxed = box(line)
newline =  [0,0,0]
for pixel in boxed:
    if pixel != [255,255,255] and pixel != [0,0,0]:
        hls = list(colorsys.rgb_to_hls(*[x / 256 for x in pixel]))
        print(hls)
        newline.extend(pixel)

image = [newline for i in range(10)]
png.from_array(image, 'RGB').save('gradient.png')


#for color in colors:
#    rgb = [int(x) for x in color.split(",")]
#    hls = list(colorsys.rgb_to_hls(*[x / 256 for x in rgb]))
#    hls_dark_old = [hls[0], hls[1] * 0.85, hls[2]]
#    hls_dark = [hls[0], hls[1] * 0.8, hls[2] if hls[1] < .5 else hls[2] * .75]
#    rgb_dark = [int(x * 256) for x in colorsys.hls_to_rgb(*hls_dark)]
#    colormap.append([color, hls[2], ",".join([str(x) for x in rgb_dark])])
#    shrink4[color] = ",".join([str(x) for x in rgb_dark])

